@{
    ViewBag.Title = "Index";
}

<script type="text/javascript">

    var system = {};
    var host = window.location.host;
    console.log(navigator.userAgent);
    
    var p = navigator.platform;
    system.win = p.indexOf("Win") == 0;
    system.mac = p.indexOf("Mac") == 0;
    system.x11 = (p == "X11") || (p.indexOf("Linux") == 0);
    if (system.win || system.mac || system.xll) {//如果是电脑跳转到百度  
        if (host.substr(0, 9) == 'localhost') {
            window.location.href = "/Home/index_m?userid=@ViewBag.bsU_Id";
        }
        else
            window.location.href = "/wjkfq_gis/Home/index_m?userid=@ViewBag.bsU_Id";

    } else {  //如果是手机,跳转到谷歌
        window.location.href = "http://www.google.cn/";
    }

    uaredirect("/Home/index_m.html", "/Home/index_pc.html");

   function uaredirect(f) {
       try {
           if (document.getElementById("bdmark") != null) {
               return;
           }
           var b = false;
           if (arguments[1]) {
               var e = window.location.host;
               var a = window.location.href;
               if (isSubdomain(arguments[1], e) == 1) {
                   f = f + "/#m/" + a;
                   b = true
               } else {
                   if (isSubdomain(arguments[1], e) == 2) {
                       f = f + "/#m/" + a;
                       b = true
                   } else {
                       f = a;
                       b = false
                   }
               }
           } else {
               b = true
           }
           if (b) {
               var c = window.location.hash;
               if (!c.match("fromapp")) {
                   if ((navigator.userAgent.match(/(iPhone|iPod|Android|ios|SymbianOS)/i))) {
                       location.replace(f)
                   }
               }
           }
       } catch (d) { }
   }
   function isSubdomain(c, d) {
       this.getdomain = function (f) {
           var e = f.indexOf("://");
           if (e > 0) {
               var h = f.substr(e + 3)
           } else {
               var h = f
           }
           var g = /^www\./;
           if (g.test(h)) {
               h = h.substr(4)
           }
           return h
       };
       if (c == d) {
           return 1
       } else {
           var c = this.getdomain(c);
           var b = this.getdomain(d);
           if (c == b) {
               return 1
           } else {
               c = c.replace(".", "\\.");
               var a = new RegExp("\\." + c + "$");
               if (b.match(a)) {
                   return 2
               } else {
                   return 0
               }
           }
       }
   };

</script>

